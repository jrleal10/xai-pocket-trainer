<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="theme-color" content="#10a37f">
  <meta name="description" content="Interview preparation for xAI - Master your pitch, practice objections, memorize key concepts">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <title>xAI Pocket Trainer</title>

  <link rel="manifest" href="/manifest.json">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/icon-192.png">
  <link rel="apple-touch-icon" href="/icons/icon-512.png">

  <style>
    /* ============================================
       SECTION 1: CSS RESET & VARIABLES
       ============================================ */

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      /* Backgrounds */
      --bg-primary: #0a0a0a;
      --bg-secondary: #1a1a1a;
      --bg-card: #242424;

      /* Accent */
      --accent-primary: #10a37f;
      --accent-secondary: #0d8a6a;

      /* Status */
      --color-success: #10a37f;
      --color-warning: #f59e0b;
      --color-error: #ef4444;

      /* Text */
      --text-primary: #ffffff;
      --text-secondary: #a0a0a0;
      --text-muted: #6b6b6b;

      /* Borders */
      --border-color: #333333;

      /* Spacing */
      --spacing-xs: 4px;
      --spacing-sm: 8px;
      --spacing-md: 16px;
      --spacing-lg: 24px;
      --spacing-xl: 32px;
    }

    /* ============================================
       SECTION 2: BASE STYLES
       ============================================ */

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Inter', sans-serif;
      font-size: 16px;
      line-height: 1.5;
      background: var(--bg-primary);
      color: var(--text-primary);
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      overflow-x: hidden;
    }

    h1 {
      font-size: 1.75rem;
      font-weight: 700;
      margin-bottom: var(--spacing-md);
    }

    h2 {
      font-size: 1.5rem;
      font-weight: 600;
      margin-bottom: var(--spacing-md);
    }

    h3 {
      font-size: 1.25rem;
      font-weight: 600;
      margin-bottom: var(--spacing-sm);
    }

    /* ============================================
       SECTION 3: LAYOUT COMPONENTS
       ============================================ */

    .container {
      max-width: 100%;
      padding: var(--spacing-md);
      min-height: 100vh;
    }

    @media (min-width: 768px) {
      .container {
        max-width: 480px;
        margin: 0 auto;
      }
    }

    .view {
      display: none;
    }

    .view.active {
      display: block;
      animation: fadeIn 0.3s ease-in;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .card {
      background: var(--bg-card);
      border-radius: 12px;
      padding: var(--spacing-md);
      border: 1px solid var(--border-color);
      margin-bottom: var(--spacing-md);
    }

    .btn {
      background: var(--accent-primary);
      color: white;
      border: none;
      border-radius: 8px;
      padding: 12px 24px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
      width: 100%;
      text-align: center;
      text-decoration: none;
      display: inline-block;
      min-height: 44px;
      line-height: 20px;
    }

    .btn:hover {
      background: var(--accent-secondary);
      transform: translateY(-1px);
    }

    .btn:active {
      transform: translateY(0);
    }

    .btn-secondary {
      background: var(--bg-secondary);
      border: 1px solid var(--border-color);
    }

    .btn-secondary:hover {
      background: var(--bg-card);
      border-color: var(--accent-primary);
    }

    /* ============================================
       SECTION 4: DASHBOARD STYLES
       ============================================ */

    .header {
      text-align: center;
      padding: var(--spacing-lg) 0;
      border-bottom: 1px solid var(--border-color);
      margin-bottom: var(--spacing-lg);
    }

    .header h1 {
      color: var(--accent-primary);
      margin-bottom: var(--spacing-xs);
    }

    .header .subtitle {
      color: var(--text-secondary);
      font-size: 0.875rem;
    }

    .countdown-container {
      text-align: center;
      margin-bottom: var(--spacing-xl);
    }

    .countdown-container h2 {
      color: var(--text-secondary);
      font-size: 1rem;
      font-weight: 500;
      margin-bottom: var(--spacing-sm);
    }

    .countdown-display {
      font-family: 'SF Mono', 'Roboto Mono', monospace;
      font-size: 2rem;
      font-weight: 700;
      color: var(--accent-primary);
      margin-bottom: var(--spacing-sm);
    }

    .countdown-display.today {
      color: var(--color-warning);
      font-size: 2.5rem;
      animation: pulse 2s ease-in-out infinite;
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.7; }
    }

    .countdown-date {
      color: var(--text-muted);
      font-size: 0.875rem;
    }

    .phrase-moment {
      background: var(--bg-card);
      border-radius: 12px;
      padding: var(--spacing-lg);
      margin-bottom: var(--spacing-xl);
      border: 1px solid var(--border-color);
      cursor: pointer;
      transition: all 0.3s;
      min-height: 120px;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }

    .phrase-moment:hover {
      border-color: var(--accent-primary);
      transform: translateY(-2px);
    }

    .phrase-moment h3 {
      color: var(--text-secondary);
      font-size: 0.875rem;
      font-weight: 500;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      margin-bottom: var(--spacing-sm);
    }

    .phrase-text {
      color: var(--text-primary);
      font-size: 1.125rem;
      line-height: 1.6;
      text-align: center;
    }

    .phrase-hint {
      color: var(--text-muted);
      font-size: 0.75rem;
      text-align: center;
      margin-top: var(--spacing-sm);
    }

    .mode-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: var(--spacing-md);
      margin-bottom: var(--spacing-lg);
    }

    .mode-btn {
      background: var(--bg-secondary);
      border: 1px solid var(--border-color);
      border-radius: 16px;
      padding: var(--spacing-lg);
      text-align: center;
      cursor: pointer;
      transition: all 0.2s;
      text-decoration: none;
      color: var(--text-primary);
      display: block;
      min-height: 120px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }

    .mode-btn:hover {
      border-color: var(--accent-primary);
      transform: translateY(-2px);
      background: var(--bg-card);
    }

    .mode-btn .icon {
      font-size: 2rem;
      margin-bottom: var(--spacing-sm);
    }

    .mode-btn .title {
      font-weight: 600;
      margin-bottom: var(--spacing-xs);
    }

    .mode-btn .duration {
      color: var(--text-muted);
      font-size: 0.75rem;
    }

    .random-pill-btn {
      grid-column: 1 / -1;
      background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
      border: none;
      padding: var(--spacing-lg);
      font-size: 1.125rem;
    }

    .random-pill-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(16, 163, 127, 0.3);
    }

    /* ============================================
       SECTION 5: FLASHCARDS STYLES
       ============================================ */

    .flashcard-controls {
      display: flex;
      gap: var(--spacing-sm);
      margin-bottom: var(--spacing-lg);
      flex-wrap: wrap;
    }

    .flashcard-controls select {
      flex: 1;
      min-width: 150px;
      background: var(--bg-secondary);
      color: var(--text-primary);
      border: 1px solid var(--border-color);
      border-radius: 8px;
      padding: 12px;
      font-size: 1rem;
    }

    .flashcard-controls button {
      flex: 0 0 auto;
    }

    .progress-indicator {
      text-align: center;
      color: var(--text-secondary);
      margin-bottom: var(--spacing-md);
      font-size: 0.875rem;
    }

    .flashcard-container {
      perspective: 1000px;
      margin-bottom: var(--spacing-lg);
      min-height: 400px;
    }

    .flashcard {
      position: relative;
      width: 100%;
      min-height: 400px;
      transition: transform 0.6s;
      transform-style: preserve-3d;
      cursor: pointer;
    }

    .flashcard.flipped {
      transform: rotateY(180deg);
    }

    .flashcard-face {
      position: absolute;
      width: 100%;
      min-height: 400px;
      backface-visibility: hidden;
      background: var(--bg-card);
      border: 2px solid var(--border-color);
      border-radius: 16px;
      padding: var(--spacing-xl);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
    }

    .flashcard-face.front {
      border-color: var(--accent-primary);
    }

    .flashcard-face.back {
      transform: rotateY(180deg);
      border-color: var(--color-success);
    }

    .flashcard-face .category-badge {
      position: absolute;
      top: var(--spacing-md);
      right: var(--spacing-md);
      background: var(--accent-primary);
      color: white;
      padding: 4px 12px;
      border-radius: 12px;
      font-size: 0.75rem;
      font-weight: 600;
    }

    .flashcard-face .content {
      font-size: 1.25rem;
      line-height: 1.6;
      color: var(--text-primary);
    }

    .flashcard-face.front .content {
      font-size: 1.5rem;
      font-weight: 600;
    }

    .flashcard-actions {
      display: flex;
      gap: var(--spacing-md);
      margin-bottom: var(--spacing-lg);
    }

    .flashcard-actions button {
      flex: 1;
      padding: var(--spacing-md);
      font-size: 1rem;
    }

    .swipe-left {
      background: var(--color-warning);
    }

    .swipe-right {
      background: var(--color-success);
    }

    /* ============================================
       SECTION 6: NAVIGATION
       ============================================ */

    .back-button {
      margin-bottom: var(--spacing-lg);
      background: var(--bg-secondary);
      border: 1px solid var(--border-color);
      color: var(--text-primary);
      display: inline-flex;
      align-items: center;
      gap: var(--spacing-sm);
      padding: var(--spacing-sm) var(--spacing-md);
      width: auto;
    }

    .back-button:hover {
      border-color: var(--accent-primary);
      background: var(--bg-card);
    }

    /* ============================================
       SECTION 7: UTILITY CLASSES
       ============================================ */

    .hidden {
      display: none !important;
    }

    .text-center {
      text-align: center;
    }

    .text-muted {
      color: var(--text-muted);
    }

    .mb-lg {
      margin-bottom: var(--spacing-lg);
    }

    /* ============================================
       SECTION 8: LOADING STATE
       ============================================ */

    .loading {
      text-align: center;
      padding: var(--spacing-xl);
      color: var(--text-secondary);
    }

    .spinner {
      border: 3px solid var(--bg-secondary);
      border-top: 3px solid var(--accent-primary);
      border-radius: 50%;
      width: 40px;
      height: 40px;
      animation: spin 1s linear infinite;
      margin: 0 auto var(--spacing-md);
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>
</head>
<body>

  <!-- ============================================
       SECTION 1: DASHBOARD VIEW
       ============================================ -->

  <div id="dashboard" class="view active">
    <div class="container">
      <div class="header">
        <h1>üéØ xAI Pocket Trainer</h1>
        <p class="subtitle">Interview Preparation for xAI</p>
      </div>

      <div class="countdown-container">
        <h2>‚è±Ô∏è COUNTDOWN TIMER</h2>
        <div class="countdown-display" id="countdown-display">
          Loading...
        </div>
        <div class="countdown-date">at√© 29/12/2025 √†s 17:00 BRT</div>
      </div>

      <div class="phrase-moment" id="phrase-moment" onclick="nextPhrase()">
        <h3>üí¨ FRASE DO MOMENTO</h3>
        <div class="phrase-text" id="phrase-text">
          Loading...
        </div>
        <div class="phrase-hint">Tap para pr√≥xima frase</div>
      </div>

      <div class="mode-grid">
        <a href="#flashcards" class="mode-btn">
          <div class="icon">üíä</div>
          <div class="title">Flashcards</div>
          <div class="duration">2 min</div>
        </a>

        <a href="#pitch" class="mode-btn">
          <div class="icon">‚è±Ô∏è</div>
          <div class="title">45-Sec Pitch</div>
          <div class="duration">Em breve</div>
        </a>

        <a href="#objections" class="mode-btn">
          <div class="icon">üí£</div>
          <div class="title">Objections</div>
          <div class="duration">Em breve</div>
        </a>

        <a href="#vicio-police" class="mode-btn">
          <div class="icon">üö®</div>
          <div class="title">V√≠cio Police</div>
          <div class="duration">Em breve</div>
        </a>

        <a href="#random-pill" class="mode-btn random-pill-btn">
          <div class="icon">üé≤</div>
          <div class="title">RANDOM PILL</div>
          <div class="duration">D√° algo √∫til em 30seg</div>
        </a>

        <a href="#preflight" class="mode-btn">
          <div class="icon">üìã</div>
          <div class="title">Pre-Flight Checklist</div>
          <div class="duration">Dia 29</div>
        </a>
      </div>
    </div>
  </div>

  <!-- ============================================
       SECTION 2: FLASHCARDS VIEW
       ============================================ -->

  <div id="flashcards" class="view">
    <div class="container">
      <button class="btn back-button" onclick="navigateTo('dashboard')">
        ‚Üê Voltar
      </button>

      <h1 class="text-center mb-lg">üíä Flashcards</h1>

      <div class="flashcard-controls">
        <select id="category-filter" onchange="filterByCategory()">
          <option value="all">Todas as Categorias</option>
          <option value="tecnico">T√©cnico</option>
          <option value="historias">Hist√≥rias</option>
          <option value="pessoas">Pessoas</option>
          <option value="frases">Frases-Chave</option>
          <option value="dos-donts">Do's & Don'ts</option>
        </select>

        <button class="btn btn-secondary" onclick="shuffleCards()" style="width: auto; padding: 12px 20px;">
          üîÄ Shuffle
        </button>
      </div>

      <div class="progress-indicator" id="card-progress">
        Card 1 of 45
      </div>

      <div class="flashcard-container">
        <div class="flashcard" id="flashcard" onclick="flipCard()">
          <div class="flashcard-face front">
            <span class="category-badge" id="card-category">T√©cnico</span>
            <div class="content" id="card-front">
              Carregando...
            </div>
          </div>
          <div class="flashcard-face back">
            <span class="category-badge" id="card-category-back">T√©cnico</span>
            <div class="content" id="card-back">
              Carregando...
            </div>
          </div>
        </div>
      </div>

      <div class="flashcard-actions">
        <button class="btn swipe-left" onclick="markForReview()">
          ‚Üê Preciso Revisar
        </button>
        <button class="btn swipe-right" onclick="markAsKnown()">
          Sei Bem ‚Üí
        </button>
      </div>

      <div class="text-center text-muted" style="font-size: 0.875rem;">
        Ou deslize o card: ‚Üê revisar | sei bem ‚Üí
      </div>
    </div>
  </div>

  <!-- ============================================
       SECTION 3: PLACEHOLDER VIEWS (Coming Soon)
       ============================================ -->

  <div id="pitch" class="view">
    <div class="container">
      <button class="btn back-button" onclick="navigateTo('dashboard')">‚Üê Voltar</button>
      <h1 class="text-center">‚è±Ô∏è 45-Second Pitch</h1>
      <div class="card text-center">
        <h2>Em breve!</h2>
        <p class="text-muted">Feature dispon√≠vel na FASE 2</p>
      </div>
    </div>
  </div>

  <div id="objections" class="view">
    <div class="container">
      <button class="btn back-button" onclick="navigateTo('dashboard')">‚Üê Voltar</button>
      <h1 class="text-center">üí£ Objection Handling</h1>
      <div class="card text-center">
        <h2>Em breve!</h2>
        <p class="text-muted">Feature dispon√≠vel na FASE 2</p>
      </div>
    </div>
  </div>

  <div id="vicio-police" class="view">
    <div class="container">
      <button class="btn back-button" onclick="navigateTo('dashboard')">‚Üê Voltar</button>
      <h1 class="text-center">üö® V√≠cio Police</h1>
      <div class="card text-center">
        <h2>Em breve!</h2>
        <p class="text-muted">Feature dispon√≠vel na FASE 3</p>
      </div>
    </div>
  </div>

  <div id="random-pill" class="view">
    <div class="container">
      <button class="btn back-button" onclick="navigateTo('dashboard')">‚Üê Voltar</button>
      <h1 class="text-center">üé≤ Random Pill</h1>
      <div class="card text-center">
        <h2>Em breve!</h2>
        <p class="text-muted">Feature dispon√≠vel na FASE 3</p>
      </div>
    </div>
  </div>

  <div id="preflight" class="view">
    <div class="container">
      <button class="btn back-button" onclick="navigateTo('dashboard')">‚Üê Voltar</button>
      <h1 class="text-center">üìã Pre-Flight Checklist</h1>
      <div class="card text-center">
        <h2>Em breve!</h2>
        <p class="text-muted">Feature dispon√≠vel na FASE 3</p>
      </div>
    </div>
  </div>

  <!-- ============================================
       JAVASCRIPT - APP LOGIC
       ============================================ -->

  <script>
    // ============================================
    // SECTION 1: CONSTANTS & DATA
    // ============================================

    const INTERVIEW_DATE = new Date('2025-12-29T17:00:00-03:00');

    // Key phrases for "Frase do Momento"
    const keyPhrases = [
      "5 years of daily fundamental analysis at Joule",
      "Validated 7 ratios against actual defaults‚Äî5 predictive, 2 not",
      "That validation process is exactly what AI tutoring requires",
      "Modigliani-Miller: debt and equity are two views of the same company",
      "I can contribute immediately and bring differentiated expertise for future projects",
      "Ready to start immediately, 100% available",
      "Is there anything about my background that concerns you?",
      "I haven't taken the CFA, but I've APPLIED these concepts for 20 years with real money at stake",
      "Jeffrey, I know we have limited time. Is there anything about my background that we should address?",
      "First-principles thinking. Rare door into AI for finance practitioner",
      "At 45, this is not job-hopping‚Äîit's a deliberate career move",
      "The CFA tests if you can pass an exam. My experience tests if you can apply concepts when real money is at stake",
      "Growth only matters if ROIC > WACC",
      "Revenue up but CFO down = red flag",
      "Never apologize for your English. Never say 'man' or 'you know'",
      "5 years at Joule doing daily equity analysis in the investment committee"
    ];

    // Flashcards data - ALL 45 cards from PRD Section 5.1
    const flashcardsData = [
      // T√âCNICO (20 cards)
      {id: 'T1', category: 'tecnico', front: 'EV/EBITDA', back: 'Enterprise Value / EBITDA. Capital-structure neutral. Use for cross-company comparison. Triangulate with EV/EBIT and EV/FCF.'},
      {id: 'T2', category: 'tecnico', front: 'Enterprise Value', back: 'EV = Market Cap + Net Debt + Minority Interest + Preferred. Value to ALL capital providers.'},
      {id: 'T3', category: 'tecnico', front: 'ROIC', back: 'NOPAT / Invested Capital. "Growth only matters if ROIC > WACC." Sacred at Joule.'},
      {id: 'T4', category: 'tecnico', front: 'PEG Ratio', back: 'P/E / Growth Rate. Central to GARP. PEG=1 is fair. PEG<1 potentially undervalued.'},
      {id: 'T5', category: 'tecnico', front: 'Cash Conversion Cycle', back: 'DSO + DIO - DPO. Red flag: DSO growing faster than revenue = collection problems.'},
      {id: 'T6', category: 'tecnico', front: 'Modigliani-Miller', back: "Capital structure doesn't affect firm value. Debt and equity = two views of same company. What matters: assets and cash flows."},
      {id: 'T7', category: 'tecnico', front: 'WACC', back: '(E/V √ó Ke) + (D/V √ó Kd √ó (1-t)). Where Ke = Rf + Œ≤ √ó MRP.'},
      {id: 'T8', category: 'tecnico', front: 'Free Cash Flow', back: "FCFF = EBIT(1-t) + D&A - CapEx - ŒîNWC. What's available to all capital providers."},
      {id: 'T9', category: 'tecnico', front: 'DCF Terminal Value', back: 'Gordon Growth: FCF √ó (1+g) / (WACC-g). Often 60-80% of total value. Highly sensitive to assumptions.'},
      {id: 'T10', category: 'tecnico', front: 'Interest Coverage', back: 'EBIT / Interest Expense. Ability to pay interest. Below 2x = concerning.'},
      {id: 'T11', category: 'tecnico', front: 'Net Debt/EBITDA', back: '(Debt - Cash) / EBITDA. Leverage net of cash. Bankers love this.'},
      {id: 'T12', category: 'tecnico', front: 'ROE', back: 'Net Income / Equity. Can be inflated by leverage. Use with ROIC.'},
      {id: 'T13', category: 'tecnico', front: 'Gross Margin', back: 'Gross Profit / Revenue. Pricing power and COGS efficiency.'},
      {id: 'T14', category: 'tecnico', front: 'Operating Margin', back: 'EBIT / Revenue. Core profitability. Operating leverage.'},
      {id: 'T15', category: 'tecnico', front: 'Earnings Quality Red Flags', back: 'Revenue ‚Üë but CFO ‚Üì. Receivables growing > revenue. Frequent "one-time" charges.'},
      {id: 'T16', category: 'tecnico', front: 'DSO (Days Sales Outstanding)', back: '(Receivables / Revenue) √ó 365. Days to collect. Rising = bad sign.'},
      {id: 'T17', category: 'tecnico', front: 'Brazil Interest Rates', back: 'Currently ~15%. Makes equity unattractive vs. government bonds. Structural discounts.'},
      {id: 'T18', category: 'tecnico', front: 'Common AI Error: P/EBITDA', back: 'Wrong! Should be EV/EBITDA. P/ is equity level, EBITDA is firm level. Inconsistent.'},
      {id: 'T19', category: 'tecnico', front: 'Common AI Error: US Rates for Brazil', back: 'Wrong! Brazil = 15%, not 2-3%. WACC is completely different.'},
      {id: 'T20', category: 'tecnico', front: 'GARP', back: "Growth at Reasonable Price. Joule's strategy. Balance growth with valuation discipline."},

      // HIST√ìRIAS (7 cards)
      {id: 'H1', category: 'historias', front: 'Joule Story - Short', back: '5 years, GARP fund, daily investment committee, DCF validation, multiple analysis, earnings quality debates. "Prove it to me" culture.'},
      {id: 'H2', category: 'historias', front: 'Joule Story - Key Numbers', back: '5 years as partner. +38.64% YTD 2025 vs Ibov +31.29%. 18+ year track record.'},
      {id: 'H3', category: 'historias', front: 'ABC Story - Short', back: 'Validated rating model. 7 fundamental ratios analyzed. 5 predictive, 2 not. Built logistic regression. Central Bank approved.'},
      {id: 'H4', category: 'historias', front: 'ABC Story - Detail', back: 'Central Bank said model too judgmental. Gathered 5 years data. Analyzed each ratio vs defaults. Found 5/7 useful. Built automated model with override option. BC approved and praised.'},
      {id: 'H5', category: 'historias', front: 'Emerging Markets - Short', back: 'Brazil: 15% rates, small private markets, structural equity discounts. Can help reduce US bias in Grok.'},
      {id: 'H6', category: 'historias', front: 'Emerging Markets - Connection to Jeffrey', back: 'Jeffrey has EM Fixed Income background (until 2018), worked with LatAm clients. Natural connection point.'},
      {id: 'H7', category: 'historias', front: '"Cheap Multiple" Trap (Joule)', back: 'Retailer at 6x vs peers at 10x. Thesis: digital margin expansion. Challenge: digital needs capex. Found: DSO rising = extending terms. Passed. Market was right.'},

      // PESSOAS (4 cards)
      {id: 'P1', category: 'pessoas', front: 'Jeffrey Weichsel', back: 'Human Data Manager @ xAI. Ex-Scale AI. Ex-EM Fixed Income (LatAm clients until 2018). Connecticut College. Palo Alto.'},
      {id: 'P2', category: 'pessoas', front: 'Adriana', back: 'Team Lead, Finance Vertical. Equity analyst background. Said: "Current focus is fundamental analysis." "Adventurous spirit."'},
      {id: 'P3', category: 'pessoas', front: 'Michael', back: 'First interviewer. Behavioral focus. Liked Bear Stearns story, Markowitz testing.'},
      {id: 'P4', category: 'pessoas', front: 'xAI Team', back: 'Growing to 100+. Finance vertical. Projects: CFA training, synthetic IB deals, virtual data rooms.'},

      // FRASES-CHAVE (8 cards)
      {id: 'F1', category: 'frases', front: 'Opening Line', back: '5 years of daily fundamental analysis at Joule, hands-on model validation at ABC, ready to start immediately.'},
      {id: 'F2', category: 'frases', front: 'ABC Pitch', back: 'Validated 7 ratios against actual defaults. Found 5 predictive, 2 not. Built automated model. Central Bank approved.'},
      {id: 'F3', category: 'frases', front: 'Closing Question', back: 'Is there anything about my background that concerns you, or any question I can address right now?'},
      {id: 'F4', category: 'frases', front: 'Why xAI', back: 'First-principles thinking. Rare door into AI for finance practitioner. Want to build, not join.'},
      {id: 'F5', category: 'frases', front: 'Credit vs Equity', back: 'Modigliani-Miller: debt and equity are two views of the same company.'},
      {id: 'F6', category: 'frases', front: 'Value Proposition', back: 'I can contribute to current fundamental analysis projects immediately, AND bring differentiated expertise for future risk projects.'},
      {id: 'F7', category: 'frases', front: 'Availability', back: '100% available. Transitioned out of Joule. Ready to start immediately.'},
      {id: 'F8', category: 'frases', front: 'No CFA Response', back: "I haven't taken the CFA, but I've APPLIED these concepts for 20 years with real money at stake."},

      // DO'S AND DON'TS (6 cards)
      {id: 'D1', category: 'dos-donts', front: "Don't Say", back: '"man", "you know", "basically", "sorry", "my poor English"'},
      {id: 'D2', category: 'dos-donts', front: "Don't Do", back: 'Apologize. Mention Joule office. Focus on credit first. Over-explain.'},
      {id: 'D3', category: 'dos-donts', front: 'Do Say', back: '"Joule", "ABC", "fundamental analysis", "validation", "immediately"'},
      {id: 'D4', category: 'dos-donts', front: 'Do', back: 'Lead with Joule + ABC. Keep under 60 seconds. Ask closing question.'},
      {id: 'D5', category: 'dos-donts', front: "If You Don't Know", back: '"I don\'t have direct experience with that, but my instinct based on Joule/ABC is..."'},
      {id: 'D6', category: 'dos-donts', front: 'End Statements', back: "Downward inflection. Sounds confident. Don't trail off or upspeak."}
    ];

    // ============================================
    // SECTION 2: STATE MANAGEMENT
    // ============================================

    const state = {
      currentView: 'dashboard',
      currentCardIndex: 0,
      currentPhraseIndex: 0,
      filteredCards: [...flashcardsData],
      reviewNeeded: [],
      knownCards: [],
      isCardFlipped: false
    };

    // ============================================
    // SECTION 3: NAVIGATION
    // ============================================

    function navigateTo(viewId) {
      // Hide all views
      document.querySelectorAll('.view').forEach(view => {
        view.classList.remove('active');
      });

      // Show target view
      const targetView = document.getElementById(viewId);
      if (targetView) {
        targetView.classList.add('active');
        state.currentView = viewId;
        window.location.hash = viewId;

        // Initialize view-specific logic
        if (viewId === 'flashcards') {
          initFlashcards();
        }
      }
    }

    // Handle browser back/forward
    window.addEventListener('hashchange', () => {
      const hash = window.location.hash.slice(1) || 'dashboard';
      if (hash !== state.currentView) {
        navigateTo(hash);
      }
    });

    // ============================================
    // SECTION 4: COUNTDOWN TIMER
    // ============================================

    function updateCountdown() {
      const now = new Date();
      const diff = INTERVIEW_DATE - now;

      const countdownEl = document.getElementById('countdown-display');

      if (diff <= 0) {
        countdownEl.textContent = 'ENTREVISTA AGORA! üéØ';
        countdownEl.classList.add('today');
        return;
      }

      const days = Math.floor(diff / (1000 * 60 * 60 * 24));
      const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
      const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));

      // Check if today
      const isToday = days === 0;

      if (isToday) {
        countdownEl.textContent = `HOJE! Faltam ${hours}h ${minutes}min`;
        countdownEl.classList.add('today');
      } else {
        countdownEl.textContent = `${days} dias, ${hours} horas, ${minutes} minutos`;
        countdownEl.classList.remove('today');
      }
    }

    // Update countdown every minute
    setInterval(updateCountdown, 60000);

    // ============================================
    // SECTION 5: PHRASE ROTATION
    // ============================================

    function displayPhrase() {
      const phraseEl = document.getElementById('phrase-text');
      phraseEl.textContent = keyPhrases[state.currentPhraseIndex];
    }

    function nextPhrase() {
      state.currentPhraseIndex = (state.currentPhraseIndex + 1) % keyPhrases.length;
      displayPhrase();
    }

    // Auto-rotate phrases every 30 seconds
    let phraseInterval = setInterval(nextPhrase, 30000);

    // Reset interval when user manually clicks
    document.getElementById('phrase-moment')?.addEventListener('click', () => {
      clearInterval(phraseInterval);
      phraseInterval = setInterval(nextPhrase, 30000);
    });

    // ============================================
    // SECTION 6: FLASHCARDS LOGIC
    // ============================================

    function initFlashcards() {
      loadState();
      applyFilter();
      displayCurrentCard();
    }

    function displayCurrentCard() {
      if (state.filteredCards.length === 0) {
        document.getElementById('card-front').textContent = 'Nenhum card nesta categoria';
        document.getElementById('card-back').textContent = 'Selecione outra categoria';
        return;
      }

      const card = state.filteredCards[state.currentCardIndex];
      const categoryLabels = {
        'tecnico': 'T√©cnico',
        'historias': 'Hist√≥rias',
        'pessoas': 'Pessoas',
        'frases': 'Frases-Chave',
        'dos-donts': "Do's & Don'ts"
      };

      // Update progress
      document.getElementById('card-progress').textContent =
        `Card ${state.currentCardIndex + 1} de ${state.filteredCards.length}`;

      // Update category badges
      const categoryLabel = categoryLabels[card.category] || card.category;
      document.getElementById('card-category').textContent = categoryLabel;
      document.getElementById('card-category-back').textContent = categoryLabel;

      // Update content
      document.getElementById('card-front').textContent = card.front;
      document.getElementById('card-back').textContent = card.back;

      // Reset flip state
      state.isCardFlipped = false;
      document.getElementById('flashcard').classList.remove('flipped');
    }

    function flipCard() {
      state.isCardFlipped = !state.isCardFlipped;
      const flashcard = document.getElementById('flashcard');
      if (state.isCardFlipped) {
        flashcard.classList.add('flipped');
      } else {
        flashcard.classList.remove('flipped');
      }
    }

    function nextCard() {
      state.currentCardIndex = (state.currentCardIndex + 1) % state.filteredCards.length;
      displayCurrentCard();
    }

    function markForReview() {
      const card = state.filteredCards[state.currentCardIndex];
      if (!state.reviewNeeded.includes(card.id)) {
        state.reviewNeeded.push(card.id);
      }
      saveState();
      nextCard();
    }

    function markAsKnown() {
      const card = state.filteredCards[state.currentCardIndex];
      if (!state.knownCards.includes(card.id)) {
        state.knownCards.push(card.id);
      }
      // Remove from review needed if it was there
      state.reviewNeeded = state.reviewNeeded.filter(id => id !== card.id);
      saveState();
      nextCard();
    }

    function filterByCategory() {
      const filter = document.getElementById('category-filter').value;

      if (filter === 'all') {
        state.filteredCards = [...flashcardsData];
      } else {
        state.filteredCards = flashcardsData.filter(card => card.category === filter);
      }

      // Prioritize review-needed cards
      const reviewCards = state.filteredCards.filter(card => state.reviewNeeded.includes(card.id));
      const otherCards = state.filteredCards.filter(card => !state.reviewNeeded.includes(card.id));
      state.filteredCards = [...reviewCards, ...reviewCards, ...otherCards]; // Show review cards 2x

      state.currentCardIndex = 0;
      displayCurrentCard();
      saveState();
    }

    function applyFilter() {
      const savedFilter = localStorage.getItem('xai-category-filter');
      if (savedFilter) {
        document.getElementById('category-filter').value = savedFilter;
        filterByCategory();
      } else {
        filterByCategory();
      }
    }

    function shuffleCards() {
      // Fisher-Yates shuffle
      for (let i = state.filteredCards.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [state.filteredCards[i], state.filteredCards[j]] = [state.filteredCards[j], state.filteredCards[i]];
      }
      state.currentCardIndex = 0;
      displayCurrentCard();
    }

    // Touch events for swipe gestures
    let touchStartX = 0;
    let touchEndX = 0;

    document.getElementById('flashcard')?.addEventListener('touchstart', e => {
      touchStartX = e.changedTouches[0].screenX;
    });

    document.getElementById('flashcard')?.addEventListener('touchend', e => {
      touchEndX = e.changedTouches[0].screenX;
      handleSwipe();
    });

    function handleSwipe() {
      const swipeThreshold = 50;
      const diff = touchEndX - touchStartX;

      if (Math.abs(diff) > swipeThreshold) {
        if (diff < 0) {
          // Swipe left - mark for review
          markForReview();
        } else {
          // Swipe right - mark as known
          markAsKnown();
        }
      }
    }

    // ============================================
    // SECTION 7: LOCALSTORAGE PERSISTENCE
    // ============================================

    function saveState() {
      try {
        localStorage.setItem('xai-review-needed', JSON.stringify(state.reviewNeeded));
        localStorage.setItem('xai-known-cards', JSON.stringify(state.knownCards));
        localStorage.setItem('xai-category-filter', document.getElementById('category-filter')?.value || 'all');
      } catch (e) {
        console.warn('Could not save state to localStorage:', e);
      }
    }

    function loadState() {
      try {
        const reviewNeeded = localStorage.getItem('xai-review-needed');
        const knownCards = localStorage.getItem('xai-known-cards');

        if (reviewNeeded) {
          state.reviewNeeded = JSON.parse(reviewNeeded);
        }
        if (knownCards) {
          state.knownCards = JSON.parse(knownCards);
        }
      } catch (e) {
        console.warn('Could not load state from localStorage:', e);
      }
    }

    // ============================================
    // SECTION 8: SERVICE WORKER REGISTRATION
    // ============================================

    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js')
          .then(registration => {
            console.log('Service Worker registered:', registration);
          })
          .catch(error => {
            console.log('Service Worker registration failed:', error);
          });
      });
    }

    // ============================================
    // SECTION 9: INITIALIZATION
    // ============================================

    document.addEventListener('DOMContentLoaded', () => {
      // Load initial state
      loadState();

      // Navigate to hash or dashboard
      const hash = window.location.hash.slice(1) || 'dashboard';
      navigateTo(hash);

      // Start countdown
      updateCountdown();

      // Display first phrase
      displayPhrase();

      console.log('xAI Pocket Trainer initialized!');
      console.log(`${flashcardsData.length} flashcards loaded`);
      console.log(`Interview: ${INTERVIEW_DATE.toLocaleString('pt-BR')}`);
    });
  </script>
</body>
</html>
